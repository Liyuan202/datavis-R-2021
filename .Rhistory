arrange((n))
df_plot_new
# Other way
df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange((n))
df_new
# Other way
df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new
# Other way
df_new %>%
unique.data.frame(indivID, date) %>%
count(date) %>%
arrange(date)
df_new %>%
distinct(indivID, date) %>%
arrange(date) %>%
count(date)
# Other way
df_new %>%
unique.data.frame(indivID, date) %>%
count(date) %>%
arrange(date)
list.files('C:/Users/eliyuan/Documents/GitHub')
df <- readRDS('timeuse_tidy.rds') # read the file
df # look at the file
# load libraries
library(ggpubr)
library(tidyverse)
library(lubridate)
# Create a new variables 'activity_combined' contains combined activity
df_combine <- df %>%
mutate(activity_combined = case_when(activity_class %in% c("Work", "Business", "Education") ~ "Work_or_school",
activity_class %in% c("Shopping", "Social / Leisure", "Home", "Vacation") ~ "Free_time",
TRUE ~ "Other")) # all other activities will be valued other
# transform the new variable 'activity_combined' to factor variable
df_combine
df_combine %>%
mutate(activity_combined = factor(activity_combined))
# Calculate the mean and group
df_new <- df_combine %>%
group_by(weekday, indivID, occ_full_time) %>%
mutate(time_spent = mean(time_spent),
n = n()) %>%
ungroup()
df_new
# Other way
df_new %>%
unique.data.frame(indivID, date) %>%
count(date) %>%
arrange(date)
# Other way
df_new %>%
distince(indivID, date) %>%
count(date) %>%
arrange(date)
# Other way
df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new
# Other way
df_new_new %>% df_new
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new_new %>%
ggplot(aes(date)) + geom_density() +
labs(x = "Date", title = "Distribution") +
theme_bw()
df_new_new %>%
ggplot(aes(n)) + geom_density() +
labs(x = "Date", title = "Distribution") +
theme_bw()
df_new_new %>%
ggplot(aes(date)) + geom_density() +
labs(x = "Date", title = "Distribution") +
theme_bw()
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new_new %>%
ggplot(aes(x = date, y = n)) +
geom_col(position = "dodge")
# Other way
df_new_new <- df_new %>%
group_by(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new_new <- df_new %>%
group_by(indivID, date) %>%
summarise(date = date()) %>%
ungroup() %>%
arrange(date)
df_new_new
df_new_new <- df_new %>%
group_by(indivID, date) %>%
summarise(n = n()) %>%
ungroup() %>%
arrange(n)
df_new_new
df_new_new <- df_new %>%
group_by(date) %>%
summarise(n = n()) %>%
ungroup() %>%
arrange(n)
df_new_new
df_new_new <- df_new %>%
group_by(date) %>%
summarise(n = n()) %>%
ungroup() %>%
arrange(date)
df_new_new
df_new_new <- df_new %>%
group_by(indivID) %>%
summarise(n = n()) %>%
ungroup() %>%
arrange(date)
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
ddply(date) %>%
arrange(date)
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
sort(date)
class(df_new$date)
df_new <- df_new[order(df_new$date)]
df_new %>%
distinct(indivID, date) %>%
arrange(date) %>%
count(date)
class(df_new$date)
df_new <- df_new[order(df_new$date)]
df_new <- df_new[order(df_new$date)]
df_new <- df_new[order(df_new$date),]
df_new <- df_new[order(df_new$date),]
df_new <- df_new[order(df_new$date),]
class(df_new$date)
df_new <- df_new[order(df_new$date),]
class(df_new$date)
df_new$date <- as.date(df_new$date, format = "%Y-%m-%d")
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
sort(date)
df_new %>%
distinct(indivID, date) %>%
arrange(date) %>%
count(date)
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrage(date)
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
class(df_new$date)
df_new$date <- as.date(df_new$date, format = "%Y-%m-%d")
# Other way
df_new_new <- df_new %>%
select(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
# Other way
df_new_new <- df_new %>%
unique(df_new, indivID, date) %>%
count(date) %>%
arrange(date)
# Other way
df_new_new <- df_new %>%
unique(df_new, indivID, date) %>%
count(date) %>%
arrange(date)
# Other way
df_new_new <- df_new %>%
select(indivID) %>%
count(date) %>%
arrange(date)
# Other way
df_new_new <- df_new %>%
select(date) %>%
count(date) %>%
arrange(date)
df_new_new
# Other way
df_new_new <- df_new %>%
select(date) %>%
count(indivID) %>%
arrange(date)
df_new %>%
distinct(indivID, date) %>%
arrange(date) %>%
count(date)
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
unique(df_new, by = c("indivID","date"))[, .N, by = date]
unique(df_new, by = c("indivID","date"))
# Other way
df_new_new <- df_new %>%
summarise(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
# Other way
df_new_new <- df_new %>%
n_distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_aaa <- df_new[ ,.(count = length(unique(x))), by = indivID]
df_aaa <- df_new[ ,.(count = length(unique(date))), by = indivID]
df_aaa <- df_new[ ,.(count = length(date), by = indivID]
df_aaa <- df_new[ ,. (count = length(date), by = indivID]
# Other way
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new %>%
count(indivID)
df_new %>%
unique.data.frame(df_new)
df_new %>%
unique(df_new)
unique(df_new)
unique(indivID)
unique(df_new, indivID)
df_new %>%
count(indivID)
n_distinct()
df_new %>%
table(df_new$indivID)
table(df_new$indivID)
df_participant <- df_new %>%
group_by(indivID) %>%
summarise(n = n()) %>%
ungroup()
df_participant
glimpse(df_participant)
glimpse(df_participant)
df_new %>%
summarise(n = n())
df_new %>%
summarise(indivID = n())
df_participant <- df_new %>%
group_by(indivID) %>%
summarise(n = n()) %>%
ungroup()
df_participant
glimpse(df_participant)
df_new %>%
summarise(indivID)
n_distinct()
table(df_new$indivID)
count(indivID)
df_new %>%
summarise(indivID)
n_distinct()
df_uniq <- unique(df_new)
length(df_uniq)
df_new
library(dplyr)
n_distinct(df_new$indivID)
df_new %>%
distinct(indivID)
df_new %>%
group_by(indivID)
count(date)
df_new %>%
distict(indivID)
tidytime %>%
group_by(indivID) %>% # group by indivID
mutate(start_date = min(date)) %>% #calculate the min of date
ungroup %>% # ungroup the group by indivID above
mutate(indivID = factor(indivID), # change indivID to factor variable
indivID = fct_reorder(indivID, start_date) %>% fct_rev()) %>% # reorder and reverse the order
ggplot(aes(date, indivID, colour = month(start_date, label = T))) +  # x axis is date, y axis is indivID, and colour will depend on month
geom_line() + # draw a line
geom_point(size=.5, alpha=.1) + # used to create scatterplots
theme_bw() + # simple black and white theme
scale_y_discrete(breaks = "none") +
labs(x = "Date", y = "", colour = "Starting month") # name x "Date", and use "Starting month" as different color
df_new %>%
group_by(indivID) %>% # group by indivID
mutate(start_date = min(date)) %>% #calculate the min of date
ungroup %>% # ungroup the group by indivID above
mutate(indivID = factor(indivID), # change indivID to factor variable
indivID = fct_reorder(indivID, start_date) %>% fct_rev()) %>% # reorder and reverse the order
ggplot(aes(date, indivID, colour = month(start_date, label = T))) +  # x axis is date, y axis is indivID, and colour will depend on month
geom_line() + # draw a line
geom_point(size=.5, alpha=.1) + # used to create scatterplots
theme_bw() + # simple black and white theme
scale_y_discrete(breaks = "none") +
labs(x = "Date", y = "", colour = "Starting month") # name x "Date", and use "Starting month" as different color
df_new %>%
group_by(indivID)
count(date)
df_new %>%
group_by(indivID)
summarise(n = n()) %>%
ungroup()
library(tidyverse)
fss %>%
group_by(gender, .drop = FALSE) %>%
summarise(n = n()) %>%
ungroup()
# The frequencies of gender seems quite balanced.
df_new %>%
group_by(indivID)
summarise(n = n()) %>%
ungroup()
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(n = n()) %>%
ungroup()
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(n = n()) %>%
ungroup()
count(date)
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(n = n()) %>%
ungroup()
count(date)
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(n = n()) %>%
count(date)
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(n = n()) %>%
count(date) %>%
ungroup()
df_new %>%
group_by(indivID, .drop = FALSE) %>%
summarise(date) %>%
count(date) %>%
ungroup()
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
arrange(date)
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
arrange(n)
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
arrange((n))
df_new %>%
group_by(indivID) %>%
summarise(count_date = n()) %>%
arrange((n))
df_new %>%
group_by(indivID) %>%
summarise(count_date = n()) %>%
arrange(date)
df_new %>%
group_by(indivID) %>%
summarise(count_date = n()) %>%
sort(date)
df_new %>%
group_by(indivID) %>%
summarise(count_date = n()) %>%
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
df_new
count(indivID,date)
df_new %>%
count(indivID,date)
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new %>%
group_by(indivID) %>%
summarise(count_date = n())
df_new %>%
count(indivID,date)
df_new %>%
group_by(date) %>%
summarise(count_date = n())
df_new %>%
group_by(indivID, date) %>%
summarise(count_date = n())
df_new %>%
group_by(indivID, date) %>%
summarise(count = n())
df_new %>%
select(c(indivID, date)) %>%
arrange(date) %>%
count(date)
df_new %>%
select(c(indivID, date)) %>%
arrange(date)
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID) %>%
arrange(date)
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID) %>%
arrange(date) %>%
count(date)
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID,date) %>%
arrange(date) %>%
count(date)
df_new %>%
group_by(date, indivID) %>%
summarise(count = n())
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
distinct(indivID, date) %>%
count(date) %>%
arrange(date)
df_new_new
df_new %>%
group_by(indivID,date) %>%
summarise(count = n())
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID,date) %>%
arrange(date) %>%
count(date)
df_new %>%
group_by(indivID,date) %>%
summarise(count = n())
df_new %>%
group_by(date) %>%
summarise(count = n())
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID) %>%
arrange(date) %>%
count(date)
df_new %>%
select(c(indivID, date)) %>%
group_by(indivID) %>%
summarise(count = n()) %>%
arrange(date) %>%
count(date)
df_new %>%
select(c(indivID, date)) %>%
group_by(date) %>%
summarise(uniqueid = n_distinct(indivID))
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
select(c(indivID, date)) %>%
group_by(date) %>%
summarise(uniqueid = n_distinct(indivID))
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
select(c(indivID, date)) %>%
group_by(date) %>%
summarise(uniqueid = n_distinct(indivID))
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
select(c(indivID, date)) %>%
group_by(date) %>%
summarise(uniqueid = n_distinct(indivID))
df_new_new
# Other way (need to go back and see what others)
df_new_new <- df_new %>%
select(c(indivID, date)) %>%
group_by(date) %>%
summarise(n = n_distinct(indivID))
df_new_new
